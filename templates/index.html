<!doctype html>
<html>

<head>
  <meta charset="utf-8">
  <title>Chat</title>
  <script src="https://code.jquery.com/jquery-1.12.4.min.js"></script>
  <script src="https://kit.fontawesome.com/c416c8b21d.js" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js" integrity="sha512-bLT0Qm9VnAYZDflyKcBaQ2gg0hSYNQrJ8RilYldYQ1FxQYoCLtUjuuRuZo+fjqhx/qtq/1itJ0C2ejDxltZVFg==" crossorigin="anonymous"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/socket.io/3.0.4/socket.io.js" integrity="sha512-aMGMvNYu8Ue4G+fHa359jcPb1u+ytAF+P2SCb+PxrjCdO3n3ZTxJ30zuH39rimUggmTwmh2u7wvQsDTHESnmfQ==" crossorigin="anonymous"></script>

  <script src="../static/js/index.js" type="text/javascript"></script>
  <link rel="stylesheet " type="text/css " href="../static/css/index.css ">
  <link rel="stylesheet " type="text/css " href="../static/css/basic.css ">
</head>

<div id="notifyDiv"></div>
<div id="centerDiv"></div>

<body>
  <div id="shadow" style="display: none;"></div>
  {% include 'invitation.html' %}

  <div id="top">
    <div id="topRight"></div>
    <div id="topLeft">
      <div>{{nickName}}</div>
      <div>{{usrID}}</div>
      <div id="logout"><a href="/logout">logout</a></div>
    </div>
  </div>

  <div id="mid">

    <div id="friends">
      <div id="friends_head">
        <div id="friends_title">
          Friends
        </div>
        <div id='addFriend' class="btn icon">
          <i class="fas fa-user-plus"></i>
        </div>
      </div>
      <div id="friends_body"></div>
    </div>

    <div id="chat">
      <div id="chatHead">
        <div id="chat_headshot"><img src='../static/img/tiger/tiger01.png'></div>
        <div id="chat_name" class="friend_name">Welcome!</div>
      </div>

      <div id="content">
      </div>
      
      <div id="tools">
        <div id="file" class="icon">
          <i class="fas fa-paperclip" style="font-size: 25px;"></i>
        </div>
        <div id="photo" class="icon">
          <i class="fas fa-image" style="font-size: 25px;"></i>
        </div>
        <div id="sticker" class="icon">
          <i class="far fa-smile" style="font-size: 25px;"></i>
        </div>
        <div id="stickerList" style="display: none;"></div>
      </div>
      <div id="inputTable">
        <div id="inputText" contenteditable="true"></div>
        <!--<div id="btn_send"><button id="send" disabled>Send</button></div>!-->
        <div id="btn_send" class="btn icon"><i class="fas fa-paper-plane"></i></div>
      </div>

    </div>
  </div>
  <div id="bottom">&copy Copyright Chun-Ting Chen</div>

</body>

<script>
  // limit inputut text length < 100
  document.querySelector('#inputText').addEventListener("keypress", function(event) {
    //console.log(this.innerText.length)
    if (this.innerText.length >= 1000) {
      event.preventDefault();
      //this.innerHTML = this.innerHTML.substr(0,10);
      //this.blur();
    }
  })

  // auto update old message when scroll to top
  document.querySelector('#content').addEventListener("scroll", function(event) {
    preTop = $("#content")[0].scrollTop
    if (preTop == 0) {
      oldMsg()
    }
  })
</script>

</html>